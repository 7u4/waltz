<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->
<div class="waltz-rated-summary-table">
    <table class="table table-condensed">
        <colgroup>
            <col width="15%">
            <col ng-repeat="rating in $ctrl.ratingItems"
                 width="{{$ctrl.colWidth}}%">
            <col width="5%">
        </colgroup>
        <thead>
        <tr>
            <th>Data Type</th>
            <th ng-repeat="rating in $ctrl.ratingItems"
                ng-click="$ctrl.columnClick($event, rating.key)">
                <span ng-bind="rating.name"></span>
            </th>
            <th>Total</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="decorator in $ctrl.decorators"
            ng-click="$ctrl.rowClick($event, decorator)">
            <td>
                <span ng-bind="decorator.name">
                </span>
            </td>
            <td ng-repeat="rating in $ctrl.ratingItems">
                <span ng-if="$ctrl.totalCounts.get(decorator.id).get(rating.key) > 0">
                    <waltz-rated-summary-cell direct-count="$ctrl.directCounts.get(decorator.id).get(rating.key)"
                                              total-count="$ctrl.totalCounts.get(decorator.id).get(rating.key)"
                                              rating="rating.key"
                                              max-count="$ctrl.maxCounts.get(decorator.id)"
                                              decorator="decorator"
                                              ng-click="$ctrl.cellClick($event, decorator, rating.key)"
                                              class="clickable"
                                              style="fill: {{rating.iconColor}}">
                    </waltz-rated-summary-cell>
                </span>
            </td>
            <td>
                <span class='small text-muted'
                      ng-bind="$ctrl.maxCounts.get(decorator.id)">
                </span>
            </td>
        </tr>
        </tbody>
    </table>
</div>