<waltz-section icon='shield'
               name="Authoritative Sources">

    <div class="waltz-section-actions">
        <div ng-if="$ctrl.viewMode==='LIST'">
            <waltz-data-extract-link name="Export"
                                     styling="button"
                                     extract="authoritative-source/all"
                                     method="GET">
            </waltz-data-extract-link>
        </div>
    </div>

    <waltz-static-panels render-mode='minimal-border'
                         group-key='SECTION.AUTH_SOURCES.ABOUT'>
    </waltz-static-panels>
    <br>

    <div ng-if="$ctrl.viewMode==='LIST'">
        <waltz-auth-sources-table auth-sources="$ctrl.authSources"
                                  on-select="$ctrl.onSelectAuthSource">
        </waltz-auth-sources-table>
    </div>


    <div ng-if="$ctrl.viewMode==='DETAIL'">
        <waltz-svelte-component component="$ctrl.AuthSourceDetail"
                                primary-entity-ref="$ctrl.parentEntityRef"
                                can-edit="$ctrl.canEdit"
                                do-delete="$ctrl.doDelete"
                                do-cancel="$ctrl.cancel">
        </waltz-svelte-component>
    </div>

    <div ng-if="$ctrl.viewMode==='EDIT'">
        <waltz-svelte-component component="$ctrl.AuthSourceEditor"
                                primary-entity-ref="$ctrl.parentEntityRef"
                                do-save="$ctrl.doSave"
                                do-update="$ctrl.doUpdate"
                                do-cancel="$ctrl.cancel">
        </waltz-svelte-component>
    </div>

    <div ng-if="$ctrl.viewMode==='LIST' && $ctrl.canEdit">
        <button class="btn-link"
                ng-click="$ctrl.create()">
            <waltz-icon name="plus"></waltz-icon>
            Add new Authoritative Source
        </button>
    </div>

</waltz-section>